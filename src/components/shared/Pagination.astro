---
interface Props {
  totalPages: number;
  currentPage: number;
  queryParams: {
    category?: string;
    maxPrice?: number;
    inStock?: boolean;
    search?: string;
    piercing?: string;
  };
}

const { totalPages, currentPage, queryParams } = Astro.props;
const path = Astro.url.pathname;

// Generar URL manteniendo todos los parámetros
const generateUrl = (page: number) => {
  const params = new URLSearchParams({
    ...(queryParams.category && { category: queryParams.category }),
    ...(queryParams.maxPrice && { maxPrice: queryParams.maxPrice.toString() }),
    ...(queryParams.inStock !== undefined && { inStock: queryParams.inStock.toString() }),
    ...(queryParams.search && { search: queryParams.search }),
    ...(queryParams.piercing && { piercing: queryParams.piercing }),
    page: page.toString(),
  });
  return `${path}?${params.toString()}`;
};

const prevPage = Math.max(currentPage - 1, 1);
const nextPage = Math.min(currentPage + 1, totalPages);
---

<div class="flex justify-between items-center my-12 px-4 lg:px-0">
  <a
    href={generateUrl(prevPage)}
    class="px-5 py-2 bg-gradient-to-r from-yellow-400 to-yellow-500 text-black font-semibold rounded-2xl shadow-lg hover:from-yellow-500 hover:to-yellow-600 transition disabled:opacity-50 disabled:cursor-not-allowed"
    aria-disabled={currentPage === 1}
  >
    ← Anteriores
  </a>

  <span class="text-gray-500 font-medium">
    Página <span class="font-bold text-gray-800">{currentPage}</span> de <span class="font-bold text-gray-800">{totalPages}</span>
  </span>

  <a
    href={generateUrl(nextPage)}
    class="px-5 py-2 bg-gradient-to-r from-yellow-400 to-yellow-500 text-black font-semibold rounded-2xl shadow-lg hover:from-yellow-500 hover:to-yellow-600 transition disabled:opacity-50 disabled:cursor-not-allowed"
    aria-disabled={currentPage === totalPages}
  >
    Siguientes →
  </a>
</div>

<style>
  a[aria-disabled="true"] {
    pointer-events: none;
  }
</style>