---
// src/components/AdminProductCard.astro
import type { ProductWithImages } from '@/interfaces';

interface Props {
  product: ProductWithImages;
}

const { product } = Astro.props;
const { id, name, price, images } = product;

const formatCurrency = (value: number) => {
  return new Intl.NumberFormat('es-MX', {
    style: 'currency',
    currency: 'MXN',
  }).format(value);
};

const imageUrl = images?.[0] || 'https://placehold.co/400x400/e2e8f0/4a5568?text=Sin+Imagen';
---
<article 
  class="group relative flex cursor-pointer flex-col overflow-hidden rounded-xl bg-white shadow-md transition-all duration-300 hover:shadow-xl hover:-translate-y-1 border border-gray-200"
  data-product-id={id}
>
  <div class="aspect-square overflow-hidden">
    <img 
      src={imageUrl} 
      alt={name} 
      class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110"
      loading="lazy"
    />
  </div>
  <div class="flex flex-1 flex-col justify-between p-4 h-28">
    <h3 class="flex-1 text-sm font-medium text-gray-800 line-clamp-2">{name}</h3>
    <div class="mt-2">
      <p class="text-lg font-bold text-gray-900">{formatCurrency(price)}</p>
    </div>
  </div>
  <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
    <div class="w-12 h-12 bg-amber-500 rounded-full flex items-center justify-center text-white opacity-0 group-hover:opacity-100 group-hover:scale-110 transform scale-90 transition-all duration-300 pointer-events-none">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
      </svg>
    </div>
  </div>
</article>
